<!-- extend boilerplate from base.html -->
{% extends "base.html" %}

<!-- inject contents into "block content" from base.html -->
{% block content %}

<!-- loop over each joke item retrieved in get_jokes() function, insert in card -->
    {% for joke in jokes %}
      <div class="row row-cols-1 row-cols-md-3 g-4">
          <div class="col">
              <div class="card h-100">
                  <img src="{{ joke.img_url }}" class="card-img-top" alt="joke-related image">
                  <div class="card-body">
                      <h5 class="card-title">{{ joke.joke_title }}</h5>
                      <p class="card-text">{{ joke.joke_description }}</p>
                      <div class="text-center">
                        <button type="button" class="btn btn-primary">Expand</button>
                      </div>
                      <p class="card-text">By: {{ joke.joke_teller }}</p>
                  </div>
                  <div class="card-footer">
<!-- only joke's teller and admin can edit or delete joke -->
                      {% if session.user|lower == joke.joke_teller|lower %}
                        <a href="{{ url_for('edit_joke', joke_id=joke._id) }}"><i class="fas fa-trash-alt" data-bs-toggle="tooltip" title="Delete joke"></i></a>
                        <a href="{{ url_for('edit_joke', joke_id=joke._id) }}"><i class="fas fa-edit" data-bs-toggle="tooltip" title="Edit joke"></i></a>
                      {% endif %}
                      <a href="{{ url_for('edit_joke', joke_id=joke._id) }}"><i class="fas fa-heart" data-bs-toggle="tooltip" title="Add to favourites"></i></a>
                      <a href="{{ url_for('edit_joke', joke_id=joke._id) }}"><i class="fas fa-thumbs-up" data-bs-toggle="tooltip" title="Like"></i></a>
                  </div>
              </div>
          </div>
      </div>
    {% endfor %}

{% endblock %}